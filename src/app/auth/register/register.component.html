<div class="auth-container">
  <div class="auth-background">
    <div class="auth-overlay"></div>
  </div>
  
  <div class="auth-content">
    <!-- Header -->
    <div class="auth-header">
      <button class="btn-back" (click)="goHome()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="m12 19-7-7 7-7"></path>
          <path d="m19 12H5"></path>
        </svg>
        Voltar
      </button>
      <h1 class="auth-title">
        {{ isAdminAccess ? 'Criar Conta Admin' : 'Criar Sua Conta' }}
      </h1>
      <p class="auth-subtitle">
        {{ isAdminAccess ? 'Acesso administrativo completo' : 'Tenha acesso a uma √°rea personalizada de contato' }}
      </p>
    </div>

    <!-- Success Message -->
    <div class="success-message" *ngIf="successMessage">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22,4 12,14.01 9,11.01"></polyline>
      </svg>
      {{ successMessage }}
    </div>

    <!-- Register Form -->
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="auth-form">
      <!-- Full Name Field -->
      <div class="form-group">
        <label for="fullName" class="form-label">Nome Completo</label>
        <input
          id="fullName"
          type="text"
          formControlName="fullName"
          class="form-input"
          [class.error]="registerForm.get('fullName')?.invalid && registerForm.get('fullName')?.touched"
          placeholder="Seu nome completo"
        >
        <div class="form-error" *ngIf="registerForm.get('fullName')?.invalid && registerForm.get('fullName')?.touched">
          <span *ngIf="registerForm.get('fullName')?.errors?.['required']">Nome √© obrigat√≥rio</span>
          <span *ngIf="registerForm.get('fullName')?.errors?.['minlength']">Nome deve ter pelo menos 2 caracteres</span>
        </div>
      </div>

      <!-- Email Field -->
      <div class="form-group">
        <label for="email" class="form-label">Email</label>
        <input
          id="email"
          type="email"
          formControlName="email"
          class="form-input"
          [class.error]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
          placeholder="seu&#64;email.com"
        >
        <div class="form-error" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
          <span *ngIf="registerForm.get('email')?.errors?.['required']">Email √© obrigat√≥rio</span>
          <span *ngIf="registerForm.get('email')?.errors?.['email']">Digite um email v√°lido</span>
        </div>
        <div class="form-hint" *ngIf="!isAdminAccess">
          üí° Use <strong>admin&#64;eduardobarreto.dev</strong> para ter acesso administrativo
        </div>
      </div>

      <!-- Company Field -->
      <div class="form-group">
        <label for="company" class="form-label">Empresa <span class="optional">(opcional)</span></label>
        <input
          id="company"
          type="text"
          formControlName="company"
          class="form-input"
          placeholder="Nome da sua empresa"
        >
      </div>

      <!-- Password Field -->
      <div class="form-group">
        <label for="password" class="form-label">Senha</label>
        <input
          id="password"
          type="password"
          formControlName="password"
          class="form-input"
          [class.error]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
          placeholder="Crie uma senha segura"
        >
        <!-- Password Strength -->
        <div class="password-strength" *ngIf="registerForm.get('password')?.value">
          <div class="strength-bar">
            <div 
              class="strength-fill" 
              [class]="'strength-' + getPasswordStrength()"
            ></div>
          </div>
          <span class="strength-text" [class]="'strength-' + getPasswordStrength()">
            {{ getPasswordStrengthText() }}
          </span>
        </div>
        <div class="form-error" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
          <span *ngIf="registerForm.get('password')?.errors?.['required']">Senha √© obrigat√≥ria</span>
          <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Senha deve ter pelo menos 6 caracteres</span>
        </div>
      </div>

      <!-- Confirm Password Field -->
      <div class="form-group">
        <label for="confirmPassword" class="form-label">Confirmar Senha</label>
        <input
          id="confirmPassword"
          type="password"
          formControlName="confirmPassword"
          class="form-input"
          [class.error]="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched"
          placeholder="Digite a senha novamente"
        >
        <div class="form-error" *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched">
          <span *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">Confirma√ß√£o de senha √© obrigat√≥ria</span>
          <span *ngIf="registerForm.get('confirmPassword')?.errors?.['mismatch']">Senhas n√£o conferem</span>
        </div>
      </div>

      <!-- Terms Checkbox -->
      <div class="form-group checkbox-group">
        <label class="checkbox-label">
          <input
            type="checkbox"
            formControlName="acceptTerms"
            class="checkbox-input"
          >
          <span class="checkbox-custom"></span>
          <span class="checkbox-text">
            Aceito os <a href="#" class="link">termos de uso</a> e <a href="#" class="link">pol√≠tica de privacidade</a>
          </span>
        </label>
        <div class="form-error" *ngIf="registerForm.get('acceptTerms')?.invalid && registerForm.get('acceptTerms')?.touched">
          Voc√™ deve aceitar os termos para continuar
        </div>
      </div>

      <!-- Error Message -->
      <div class="error-message" *ngIf="errorMessage">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
        {{ errorMessage }}
      </div>

      <!-- Submit Button -->
      <button 
        type="submit" 
        class="btn-primary" 
        [disabled]="registerForm.invalid || isLoading"
        [class.loading]="isLoading"
      >
        <span class="btn-text" *ngIf="!isLoading">
          {{ isAdminAccess ? 'Criar Conta Admin' : 'Criar Conta' }}
        </span>
        <span class="btn-loading" *ngIf="isLoading">
          <svg class="spinner" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-dasharray="31.416" stroke-dashoffset="31.416">
              <animateTransform attributeName="transform" type="rotate" dur="2s" values="0 12 12;360 12 12" repeatCount="indefinite"/>
              <animate attributeName="stroke-dashoffset" dur="2s" values="31.416;0;31.416" repeatCount="indefinite"/>
            </circle>
          </svg>
          Criando conta...
        </span>
      </button>

      <!-- Divider -->
      <div class="auth-divider">
        <span>ou</span>
      </div>

      <!-- Login Link -->
      <button type="button" class="btn-secondary" (click)="goToLogin()">
        J√° tenho uma conta
      </button>
    </form>
  </div>
</div>
